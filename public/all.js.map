{"version":3,"sources":["AddEditComponent.js","AppComponent.js","ControlComponent.js","MapComponent.js","ShowAllComponent.js","TestComponent.js","router.js"],"names":["window","AL","undefined","AddEditComponent","state","editMode","styles","tagMode","ControlObject","resetControl","console","log","props","editorCallback","setState","lastAdded","sendData","emitter","on","location","pathname","includes","getStructById","params","sId","off","ReactRouter","hashHistory","push","tag","value","length","setStyleTags","evt","preventDefault","encodePic","encodeURIComponent","picInput","inputs","title","nameInput","type","typeInput","year","yearInput","arch","archInput","street","streetInput","cityState","cityInput","country","countryInput","pic","description","descriptionInput","editItem","addItem","review","fields","name","city","picUrl","error","stat","decodeURIComponent","input","styleInput","addStyleTag","validateStructure","sendToViewer","React","Component","ReviewData","info","warning","JSON","stringify","AppComponent","blankContent","testBar","children","Emitter","mapMarkers","locationObjects","callbacks","getAll","$","ajax","url","method","dataType","done","data","sites","emit","fail","itemId","req","err","deleteItem","callbacksEdit","tags","mapOneItem","siteGeocode","itemRef","address","latlng","results","status","geometry","lat","lng","id","coordinate","mapData","locations","markers","filter","defaultView","mapZoom","MapComponent","focus","zoom","infoClass","controlClass","mapClass","showSite","findingOne","mapOneCallback","locationToMapper","once","buildMapCallback","forEach","item","googleMap","google","maps","Map","map","center","geocoder","Geocoder","infoWindow","InfoWindow","handleLocationError","browserHasGeolocation","pos","setPosition","setContent","navigator","geolocation","getCurrentPosition","position","coords","latitude","longitude","setCenter","getCenter","ele","setZoom","addresses","mapPopulator","handleResults","geocode","GeocoderStatus","OK","marker","Marker","markMap","siteLatLng","mapRef","setMap","contentString","infowindow","content","addListener","deselectSite","open","getPosition","close","controls","selectFilter","height","InfoComponent","generateTags","i","infoboxFilter","MapControlComponent","ShowAllComponent","loadedCallback","deletedCallback","sitesList","site","index","_id","populateList","sendToNewEditor","SiteViewComponent","tagSite","editLinkId","tagOneItem","TestComponent","links","mountNode","document","querySelector","Router","Route","Link","router","ReactDOM","render"],"mappings":"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","file":"all.js","sourcesContent":["if (window.AL === undefined){window.AL = {}; }\n\n(() => {\n\n  class AddEditComponent extends React.Component{\n\n    constructor(){\n      super();\n\n      this.state = {editMode:false,styles:[],tagMode:false};\n\n    }\n\n    componentWillMount(){\n      AL.ControlObject.resetControl();\n      console.log('mounting with props, ',this.props);\n      this.editorCallback = () => {\n        this.setState({\n          lastAdded:AL.ControlObject.sendData\n        })\n      };\n\n      AL.ControlObject.emitter.on('foundId',this.editorCallback);\n      AL.ControlObject.emitter.on('saved',this.editorCallback);\n\n      if(this.props.location.pathname.includes('tag')){\n          this.setState({\n            tagMode:true\n          })\n        AL.ControlObject.getStructById(this.props.params.sId);\n      }\n      else if(this.props.params.sId && !this.state.editMode && !this.state.tagMode){\n          this.setState({\n            editMode:true\n          });\n        AL.ControlObject.getStructById(this.props.params.sId);\n      }\n      else{\n        console.log('standard add mode');\n      }\n\n    }\n\n    componentWillUnmount(){\n      console.log('unmounting ASD/editor');\n      AL.ControlObject.emitter.off('foundId',this.editorCallback);\n      AL.ControlObject.emitter.off('saved',this.editorCallback);\n\n    }\n\n    sendToViewer(){\n      ReactRouter.hashHistory.push('/test/all');\n    }\n\n    addStyleTag(tag){\n      console.log(\"tag is\", tag.value, 'sId is ',this.props.params.sId);\n      if(tag.value.length > 0){\n        AL.ControlObject.setStyleTags(this.props.params.sId,tag.value);\n        console.log('tagged');\n      }else{\n        console.log('tag failed');\n      }\n\n    }\n\n    validateStructure(evt){\n      evt.preventDefault();\n      console.log(\"state check\", this.state);\n      //validate conditions here\n\n\n\n      // input to control object\n      var encodePic = encodeURIComponent(this.picInput.value);\n      var inputs = {\n        title:this.nameInput.value,\n        type:this.typeInput.value,\n        year:this.yearInput.value,\n        arch:this.archInput.value,\n        street:this.streetInput.value,\n        cityState:this.cityInput.value,\n        country:this.countryInput.value,\n        pic:encodePic,\n        styles:this.state.styles,\n        description:this.descriptionInput.value\n      }\n\n      //edit?\n      console.log('inputs?',inputs);\n      if (this.state.editMode){\n        AL.ControlObject.editItem(this.props.params.sId,inputs);\n      }else{\n        console.log('adding',inputs);\n        AL.ControlObject.addItem(inputs);\n      }\n\n    }\n\n    render(){\n      console.log('@render, state set to ', this.state);\n      var review;\n      var fields;\n      //field placeholders\n      var name;\n      var year;\n      var arch;\n      var type;\n      var street;\n      var city;\n      var country;\n      var styles;\n      var description;\n      var picUrl;\n\n      if(this.state){\n        console.log('last added/edit', this.state.lastAdded);\n        if(this.state.lastAdded){\n          review = <ReviewData info={this.state.lastAdded} />\n\n          console.log('returned data in state', this.state.lastAdded);\n        }\n        if(this.state.error){\n          review = <ReviewData warning={this.state.error,this.state.stat} />\n        }\n\n      }\n\n      //set placeholders and defaults if editing\n\n      console.log('last added/edit', this.state.lastAdded);\n\n     if(this.state.lastAdded){\n        console.log('default values');\n        this.nameInput.value = this.state.lastAdded.title;\n        this.yearInput.value = this.state.lastAdded.year;\n        this.archInput.value = this.state.lastAdded.arch;\n        this.typeInput.value = this.state.lastAdded.type;\n        this.cityInput.value = this.state.lastAdded.cityState;\n        this.streetInput.value = this.state.lastAdded.street;\n        this.countryInput.value = this.state.lastAdded.country;\n        this.picInput.value = decodeURIComponent(this.state.lastAdded.pic);\n        this.descriptionInput.value = this.state.lastAdded.description;\n      }\n      if(this.state.error){\n        review = <ReviewData warning={this.state.error,this.state.stat} />\n      }\n      if(this.state.lastAdded){\n        review = <ReviewData info={this.state.lastAdded} />\n        console.log('returned data in state', this.state.lastAdded);\n      }\n\n\n      if(this.state.tagMode){\n        fields = <div>\n          <hr/>\n          <h4>Styles</h4>\n          <div className=\"styletags\">Adding StyleTags {this.state.styles}</div>\n          <input ref={(input)=>{this.styleInput = input}} />\n          <div className=\"nav-button\" onClick={() => {this.addStyleTag(this.styleInput)}}>Add</div>\n        </div>\n      }else{\n\n       fields = (\n        <form onSubmit = {(evt) => {this.validateStructure(evt)}}>\n          <h4>Details</h4>\n          <input defaultValue={name} placeholder=\"Name\" ref={(input) => {this.nameInput = input}}/>\n          <input defaultValue={year} placeholder=\"Year\" ref={(input) => {this.yearInput = input}}/>\n          <input defaultValue={arch} placeholder=\"Architect/Firm\" ref={(input) => {this.archInput = input}}/>\n\n          <hr/>\n          <h4>Categories</h4>\n          <select defaultValue={type} ref={(input) => {this.typeInput = input}}>\n            <option value=\"cultural\">Cultural</option>\n            <option value=\"civic\">Civic</option>\n            <option value=\"residential\">Residential</option>\n            <option value=\"industrial\">Industrial</option>\n            <option value=\"commercial\">Commercial</option>\n            <option value=\"infrastructural\">Infrastructural</option>\n          </select>\n          <hr/>\n\n          <h4>Location</h4>\n          <input defaultValue={street} placeholder=\"Street\" ref={(input) => {this.streetInput = input}}/>\n          <input defaultValue={city} placeholder=\"City\" ref={(input) => {this.cityInput = input}}/>\n          <input defaultValue={country} placeholder=\"Country\" ref={(input) => {this.countryInput = input}}/>\n\n          <hr/>\n\n          <h4>Description</h4>\n          <textarea rows={5} cols={120} placeholder={description} defaultValue={description} ref={(input) => {this.descriptionInput = input}}/>\n\n\n\n          <hr/>\n          <h4>Image</h4>\n          <input defaultValue=\"add a URL\" ref={(input)=>{this.picInput = input}}/>\n\n          <button>Add</button>\n        </form>);\n      }\n\n\n\n      //set placeholders and defaults if editing\n\n\n\n      return (<div>\n          <div className='add-structure'>\n          <div className='panel-header'>\n            <h3 className= \"left\">Add Structure</h3>\n            <div className = \"nav-button view right\" onClick={() => {this.sendToViewer()}}> Show All </div>\n          </div>\n          {fields}\n\n        </div>\n      {review}\n      </div>)\n    }\n    //Type and Style should be set to select/dropdown list\n  }\n  //end of EditorComponent\n\n  class ReviewData extends React.Component {\n    constructor(){\n      super();\n\n    }\n    componentDidMount(){\n      console.log('review props',this.props)\n    }\n\n    render(){\n\n      var info;\n\n      if (this.props.warning){\n        console.log(this.props.warning);\n        info = \"Error \", this.props.warning;\n      }\n\n      if (this.props.info && !this.props.warning){\n        info = <ol>\n          <li>Name: {this.props.info.title} </li>\n          <li>Year: {this.props.info.year} </li>\n          <li>Arch: {this.props.info.arch} </li>\n          <li>Type: {this.props.info.type} </li>\n          <li>Street: {this.props.info.street} </li>\n          <li>City: {this.props.info.cityState} </li>\n          <li>Country: {this.props.info.country} </li>\n          <li>Styles: {JSON.stringify(this.props.info.styles)} </li>\n        </ol>\n\n      }\n\n      return (<div className='review add-structure'>\n          <h4> Saved... </h4>\n          {info}\n      </div>)\n    }\n\n  }\n  AL.ReviewData = ReviewData;\n  AL.AddEditComponent = AddEditComponent;\n})();\n","if (window.AL === undefined) {window.AL = { }; }\n\n(function() {\n\n\n  class AppComponent extends React.Component {\n    render() {\n      console.log('rendering app component');\n      var blankContent = (<div className=\"app-content blank\">\n        <h4>Use the Navigation Buttons</h4>\n      </div>)\n      var testBar = (<div className = \"top-bar nav\">\n        <ul>\n          <li className=\"link\" onClick={()=> {ReactRouter.hashHistory.push('/map');}}>Map</li>\n          <li className=\"link\" onClick={()=> {ReactRouter.hashHistory.push('/test/all');}}>Admin/Testing</li>\n          <li className=\"link\"><a href='/logout'>LogOut</a></li>\n        </ul>\n      </div>)\n\n      return( <div className='app-component'>\n\n        <div className=\"component-header\">\n          <div className=\"title\">\n            <h1>ArchiType &apos;97</h1>\n            <p><i>How Much does your Building Weigh?</i></p>\n          </div>\n          {testBar}\n        </div>\n        {console.log('props.children\\n',this.props.children)}\n        {this.props.children || blankContent}\n      </div>);\n    }\n  }\n\n  AL.AppComponent = AppComponent;\n}());\n","if (window.AL === undefined){window.AL = {}; }\n\n(() => {\n  var ControlObject;\n  var sendData;\n  var emitter = new Emitter;\n\n  window.AL.ControlObject = {\n    mapMarkers:[],\n    locationObjects:[],\n    sendData: sendData,\n    callbacks: [],\n    emitter:emitter,\n    resetControl: function(){\n\n      this.callbacks = [];\n      this.sendData = {};\n      console.log('control data and callbacks cleared');\n    },\n\n    getAll:function(){\n\n      // if (this.sendData !== undefined) {\n      //   this.locationObjects = this.sendData.sites;\n      //   emitter.emit('loaded');\n      //   return;\n      // }\n\n      // console.log('gettin everything');\n      //api get all\n      $.ajax({\n        url: '/api/sites',\n        method: 'GET',\n        dataType: 'JSON'\n      })\n      .done((data)=> {\n        console.log(\"ajax get all done, recieved: \\n \",data, \"type of\", typeof data);\n        this.sendData = data;\n        this.locationObjects = this.sendData.sites;\n        emitter.emit('loaded');\n        // console.log('grabbd everything',data);\n      })\n      .fail(()=>{\n        console.log('cant get');\n      })\n    },//end of get all\n\n    getStructById: function(itemId){\n\n      $.ajax({\n        url:'/api/sites/' + itemId,\n        method:'GET',\n        dataType:'JSON',\n      })\n      .done((data)=>{\n        console.log(\"found \", data);\n        this.sendData = data;\n        emitter.emit('foundId');\n        console.log('control callbacks test, callbacks are done ',this.callbacks);\n      })\n      .fail((req,stat,err)=>{\n        console.log('failed to get req,', req);\n        this.sendData = (req,stat,err);\n        emitter.emit('foundId');\n        //??\n      })\n    },\n    deleteItem: function(itemId){\n\n      $.ajax({\n        url:'/api/sites/' + itemId +\"/delete\",\n        method: 'DELETE',\n        dataType:'JSON'\n      })\n      .done((data) => {\n        console.log('callbacksEdit',this.callbacksEdit);\n        console.log('deleted, ',data);\n        this.sendData = data;\n        console.log('when deleted, sendData is...',this.sendData);\n        emitter.emit('deleted');\n\n      })\n      .fail((req,stat,err) => {\n        console.log('delete failure');\n        this.sendData = (req,stat,err);\n        emitter.emit('deleted');\n      });\n    },//end of delete\n    addItem: function(inputs){\n      //test\n      console.log(\"sending...\", inputs);\n\n      //api POST NEW\n      $.ajax({\n        url: '/api/sites',\n        method: 'POST',\n        dataType: 'JSON',\n        data:{\n          title:inputs.title,\n          type:inputs.type,\n          year:inputs.year,\n          arch:inputs.arch,\n          street:inputs.street,\n          cityState:inputs.cityState,\n          country:inputs.country,\n          pic:inputs.pic,\n          description:inputs.description\n        }\n\n      })\n        .fail((req,stat,error)=>{\n          // window.alert('no');\n          console.log('request unsucessful');\n          console.log(\"req\",req);\n          console.log(\"stat\",stat);\n          console.log(\"err\",error);\n          this.sendData = (req,stat,error);\n          emitter.emit('saved');\n        })\n        .done((data)=>{\n          console.log('request successful');\n          console.log('data: ',data);\n          this.sendData = data;\n          emitter.emit('saved');\n\n        })\n      },//end of addItem\n      editItem: function(itemId,inputs){\n\n        $.ajax({\n          url: '/api/sites/' + itemId + '/edit',\n          method:'PUT',\n          dataType:'JSON',\n          data:{\n            title:inputs.title,\n            type:inputs.type,\n            year:inputs.year,\n            arch:inputs.arch,\n            street:inputs.street,\n            cityState:inputs.cityState,\n            country:inputs.country,\n            pic:inputs.pic,\n            description:inputs.description\n          }\n        })\n        .fail((req,stat,error)=>{\n          // window.alert('no');\n          console.log('request unsucessful');\n          console.log(\"req\",req);\n          console.log(\"stat\",stat);\n          console.log(\"err\",error);\n          this.sendData = (req,stat,err);\n          emitter.emit('saved');\n        })\n        .done((data)=>{\n          console.log('request successful');\n          console.log('data: ',data);\n          this.sendData = data;\n          emitter.emit('saved');\n\n        })\n      },//end of editor\n      setStyleTags: function(itemId,tags){\n        console.log('set tags of ',itemId,' to ',tags)\n        $.ajax({\n          url:'/api/sites/'+itemId+'/tag',\n          method:'PUT',\n          dataType:'JSON',\n          data:{\n            styles:tags\n          }\n        })\n        .fail((req,stat,error)=>{\n          // window.alert('no');\n          console.log('request unsucessful');\n          console.log(\"req\",req);\n          console.log(\"stat\",stat);\n          console.log(\"err\",error);\n          this.sendData = (req,stat,err);\n          emitter.emit('saved');\n\n        })\n        .done((data)=>{\n          console.log('request successful');\n          console.log('data: ',data);\n          this.sendData = data;\n          emitter.emit('saved');\n\n        })\n      },\n\n      mapOneItem: function(itemId){\n\n        $.ajax({\n          url:'/api/sites/' + itemId + '/view-map',\n          method:'GET',\n          dataType:'JSON',\n        })\n        .done((data)=>{\n          console.log(\"found \", data);\n          ReactRouter.hashHistory.push('/map/view-one/'+ itemId);\n          emitter.emit('mapOne');\n        })\n        .fail((req,stat,err)=>{\n          console.log('failed to get req,', req);\n          this.sendData = (req,stat,err);\n          emitter.emit('mapOne');\n          //??\n        })\n\n      },//end of map one view\n\n      siteGeocode: function(itemRef){\n        var address = itemRef.street + ' ' + itemRef.cityState + ' ' + itemRef.country;\n        var latlng = [0,0];\n        console.log('sending ',address,'to geocode');\n        $.ajax({\n          url:'https://maps.googleapis.com/maps/api/geocode/json?address='+address+'&key=AIzaSyA5B1QULYYb2uGrGReGKSqsuwxCgXL6pOQ',\n          method:'GET',\n          dataType:'JSON',\n        })\n        .done((results)=>{\n          console.log('geocoded to',results);\n          if(results.status === 'OK'){\n            console.log('coordinates are', results.results[0].geometry.location);\n            latlng = [results.results[0].geometry.location.lat,\n            results.results[0].geometry.location.lng];\n            console.log('coordinates are', latlng);\n            console.log('for', itemRef);\n            $.ajax({\n              url:'/api/sites/'+itemRef.id+'/coordinates',\n              method:'PUT',\n              dataType:'JSON',\n              data:{\n                coordinate:latlng\n              }\n            })\n            .fail((req,stat,error)=>{\n              // window.alert('no');\n              console.log('request unsucessful');\n              console.log(\"req\",req);\n              console.log(\"stat\",stat);\n              console.log(\"err\",error);\n\n            })\n            .done((data)=>{\n              console.log('request successful');\n              console.log('data: ',data);\n              this.sendData = data;\n              emitter.emit('saved');\n\n            })\n\n            emitter.emit('geocoded');\n          }\n          else{\n            console.log('geocoder failure');\n          }\n        })\n\n      }\n\n    } //end of control object\n  }\n)();\n","if (window.AL === undefined){window.AL = {}; }\n\n(() => {\n  var mapData;\n  window.AL.mapData = {\n    locations:[],\n    markers:[],\n    filter:'none',\n    defaultView: {lat:32.776782,lng:-96.7973409},\n    mapZoom: 14\n  }\n})();\n\n(() => {\n\n\n  class MapComponent extends React.Component{\n\n    constructor(){\n      super();\n\n      this.state = {\n        focus: AL.mapData.defaultView,\n        zoom: AL.mapData.mapZoom,\n        infoClass:'oof',\n        controlClass:'low inactive',\n        mapClass:'center',\n        showSite:null,\n        findingOne:false,\n        tag:'none'\n      }\n\n    }\n\n    componentWillMount(){\n      console.log('map will mount')\n\n      console.log('map mounted with props',this.props);\n      if(this.props.params.sId){\n        //console.log('only,', this.props.params.sId);\n        this.setState({\n          findingOne:true\n        })\n        this.mapOneCallback = () => {\n          AL.mapData.locations.push(AL.ControlObject.sendData);\n          this.locationToMapper(AL.mapData.locations);\n        }\n        AL.ControlObject.emitter.once('foundId',this.mapOneCallback);\n      }else{\n\n        console.log('fill mapdata locations list with',AL.ControlObject.sendData);\n        this.buildMapCallback = () => {\n          AL.ControlObject.locationObjects.forEach(item => {\n          AL.mapData.locations.push(item);\n        })\n          this.locationToMapper(AL.mapData.locations);\n        }\n      }\n      //^ second block is primary show all\n\n      AL.ControlObject.emitter.on('loaded',this.buildMapCallback);\n\n    }\n\n\n\n    componentDidMount() {\n      console.log('map did mount');\n      //reset filter\n      this.googleMap = new google.maps.Map(this.map, {\n        center: this.state.focus,\n        zoom: this.state.zoom\n      });\n\n\n      this.geocoder = new google.maps.Geocoder();\n\n      if(!this.state.findingOne){\n        AL.ControlObject.getAll();\n      }else{\n        AL.ControlObject.getStructById(this.props.params.sId)\n      }\n\n      //sets mapdata locations and triggers callback to run geo+location\n      //console.log(this.map,this.geocoder);\n      // this.centerOnDevice(this.googleMap);\n    }\n\n    componentWillUnmount(){\n      console.log('main page unmounted');\n      AL.ControlObject.emitter.off('loaded',this.buildMapCallback);\n    }\n\n    //defaults\n\n    centerOnDevice(map){\n      var infoWindow = new google.maps.InfoWindow({map: map});\n\n      function handleLocationError(browserHasGeolocation, infoWindow, pos) {\n         infoWindow.setPosition(pos);\n         infoWindow.setContent(browserHasGeolocation ?\n                               'Error: The Geolocation service failed.' :\n                               'Error: Your browser doesn\\'t support geolocation.');\n      }\n      if (navigator.geolocation) {\n        navigator.geolocation.getCurrentPosition(function(position) {\n          var pos = {\n            lat: position.coords.latitude,\n            lng: position.coords.longitude\n          };\n\n          infoWindow.setPosition(pos);\n          infoWindow.setContent('Location found.');\n          map.setCenter(pos);\n        }, function() {\n          handleLocationError(true, infoWindow, map.getCenter());\n        });\n      } else {\n        // Browser doesn't support Geolocation\n        handleLocationError(false, infoWindow, map.getCenter());\n      }\n    }\n\n    deselectSite(evt,ele){\n\n      this.setState({\n        showSite:null,\n        infoClass:'oof',\n        controlClass:'low inactive',\n        mapClass:'center'\n      })\n     this.googleMap.setZoom(AL.mapData.mapZoom);\n    }\n    //master close\n\n    locationToMapper(locations){\n      console.log('location to geocoder',locations,'state',this.state.tag);\n      var addresses\n      if(AL.mapData.filter == 'none'){\n        addresses = locations;\n        console.log('locationToMapper says this is',addresses);\n          addresses.forEach(address => {\n            this.mapPopulator(address,this.map);\n          })\n      }else{\n        let addresses = locations;\n        addresses.forEach(address =>{\n          console.log('address',address,'includes',address.styles);\n          if (address.styles.includes(AL.mapData.filter)){\n            console.log('filter including', address);\n            this.mapPopulator(address,this.map);\n          }\n        })\n      }\n    }\n\n    mapPopulator(itemId,map){\n      var handleResults;\n      //check for item id or obj\n      //console.log('GEOCODE',itemId);\n      var address = itemId.street + \" \" + itemId.cityState + \" \" + itemId.country;\n      if (itemId.coordinate[0] === 0 && itemId.coordinate[1] === 0){\n        //are we geocoded?\n        this.geocoder.geocode({'address':address}, handleResults = (results,status)=>{\n          console.log('hi, im geocoding in your mapcomponent', 'geocoder status',status);\n          if (status === google.maps.GeocoderStatus.OK){\n            console.log('geo code this check',this.map);\n            // this.googleMap.setCenter(results[0].geometry.location);\n            var marker = new google.maps.Marker({\n              position: (results[0].geometry.location),\n              title:itemId.title\n            });\n\n            this.markMap(this.googleMap,marker,itemId);\n            return;\n          }\n          return;\n        })\n\n      } else {\n        var siteLatLng = {lat: itemId.coordinate[0], lng: itemId.coordinate[1]};\n        var marker = new google.maps.Marker({\n          position: (siteLatLng),\n          title:itemId.title\n        });\n\n        this.markMap(this.googleMap,marker,itemId);\n        return;\n\n      }\n    }\n\n\n\n    //^^ Test Geocode\n\n    markMap(mapRef,marker,item){\n\n      marker.setMap(mapRef);\n\n\n      var contentString = '<div id=\"content\">'+\n        '<div class=\"infobox-title\">'+\n        item.title + '</div>'+\n        '<div class=\"infobox-arch\">' + item.arch + '</div>'+\n      '</div>';\n\n      var infowindow = new google.maps.InfoWindow({\n       content: contentString\n      });\n      //console.log(infowindow, \"infowindow\");\n      //make infowindow\n\n\n\n      //Check for service\n\n     marker.addListener('click', (evt,ele) => {\n       if(this.state.showSite!==null){\n        deselectSite(evt,ele);\n       }\n       infowindow.open(this.map, marker);\n       this.setState({\n         showSite:item,\n         infoClass:'aif',\n         controlClass:'low',\n         mapClass:'two-thirds-map'\n       })\n       mapRef.setZoom(18);\n       mapRef.setCenter(marker.getPosition());\n     });\n     mapRef.addListener('click',()=>{\n       infowindow.close(this.map,marker);\n       this.setState({\n         showSite:null,\n         infoClass:'oof',\n         controlClass:'low inactive',\n         mapClass:'center'\n       })\n       mapRef.setZoom(AL.mapData.mapZoom)\n     });\n\n     AL.mapData.markers.push(marker);\n\n\n     if(this.state.findingOne ===true){\n       //console.log('and its..,', this.props.params.sId);\n\n       mapRef.setCenter(marker.getPosition());\n       infowindow.open(this.map,marker);\n       this.setState({\n         showSite:item,\n         infoClass:'aif',\n         mapClass:'two-thirds-map'\n       })\n\n     }\n     return;\n    }\n\n    selectFilter(filter){\n\n      this.deselectSite();\n      AL.mapData.filter = filter;\n      console.log('FILTER SET TO ',AL.mapData.filter);\n      AL.mapData.markers.forEach(marker => {marker.setMap(null)})\n      AL.mapData.markers = [];\n      this.setState({\n        tag:filter\n      })\n      console.log('resending to mapPopulator with filter', filter, 'these',AL.mapData.markers,AL.mapData.locations);\n      this.locationToMapper(AL.mapData.locations);\n\n    }\n\n    render(){\n      console.log('render state', this.state);\n      var mapClass = \"map-pane \" + this.state.mapClass\n      var infoClass = \"info-pane \" + this.state.infoClass;\n      var controlClass = \"control-pane-\" + this.state.controlClass;\n\n      var info = '';\n      var controls = '';\n\n      if(this.state.showSite !== null){\n        info= <InfoComponent showSite={this.state.showSite} infoboxFilter={(filter)=>{this.selectFilter(filter);}}/>\n        controls = <MapControlComponent showSite={this.state.showSite}/>\n      }\n\n\n\n      return (<div id=\"map-component\">\n\n        <div className=\"component-inner\">\n          <div className={infoClass}>\n            <div className = \"close\" onClick={(evt)=>{this.deselectSite(evt)}}>X</div>\n          {info}\n            <div className = \"filter-controls\">\n              <div className = \"filter-button reset\" onClick={()=>{this.selectFilter('none')}}>\n              <p>Reset Filter</p>\n              </div>\n            </div>\n          </div>\n          <div className={mapClass} ref={(map) =>\n            { this.map = map; }} style={{height: '440px'}}>\n          </div>\n          <div className={controlClass}>\n          {controls}\n          </div>\n        </div>\n      </div>);\n    }\n  }\n\n  class InfoComponent extends React.Component{\n\n    constructor(){\n      super();\n      var generateTags;\n\n    }\n    componentWillMount(){\n      this.setState({\n        info:this.props.showSite,\n        tags:this.props.showSite.styles\n      })\n\n    }\n\n\n    render(){\n      //console.log(\"InfoComponent showing \", this.state.info,this.state.tags);\n\n      return (<div className=\"info-box\">\n\n        <div className=\"info-box-text\">\n          <ol>\n           <li><h4>{this.state.info.title}</h4> </li>\n           <li>{this.state.info.street}, {this.state.info.cityState},\n              {this.state.info.country}, </li>\n           <li className='info-type'>{this.state.info.type} </li>\n           <li>{this.state.info.year} </li>\n           <li>{this.state.info.arch} </li>\n         </ol>\n        <div className=\"info-box-tags\">\n          <ul>\n            {this.state.tags.map((tag,i) => {\n              return <li key={i} onClick={(evt)=>{\n                this.props.infoboxFilter(tag)\n              }}>{tag}</li>\n            })}\n          </ul>\n        </div></div>\n      </div>)\n    }\n\n  }\n\n  class MapControlComponent extends React.Component{\n\n    componentWillMount(){\n      if (this.props.showSite){\n        this.setState({\n          info:this.props.showSite\n        })\n      }\n\n    }\n\n    render(){\n      //console.log('controlbox state: ',this.state,' img ',this.state.info.pic);\n      return(<div className=\"controlbox-content\">\n         <div className=\"mapview-image\">\n           <img src={decodeURIComponent(this.state.info.pic)}/>\n        </div>\n        <div className=\"mapview-desc\">\n          <p>{this.state.info.description || \"Stuff here\"}</p>\n        </div>\n      </div>)\n    }\n  }\n\n  AL.MapComponent = MapComponent;\n\n})();\n","if (window.AL === undefined){window.AL = {}; }\n\n(function() {\n\n  class ShowAllComponent extends React.Component{\n\n    constructor() {\n      super();\n      this.state = {\n        sites:[]\n      }\n    }\n\n    componentWillMount(){\n\n      console.log('show all will mount');\n\n      this.loadedCallback = () => {\n        console.log('viewer, loaded callback fired');\n        this.setState({\n          sites:AL.ControlObject.locationObjects\n        });\n      }\n\n      this.deletedCallback = () => {\n        AL.ControlObject.getAll();\n      }\n      //reload list after a delete to reflect changes\n\n\n      AL.ControlObject.emitter.on('loaded',this.loadedCallback);\n      AL.ControlObject.emitter.on('deleted',this.deletedCallback);\n    }\n\n    componentDidMount(){\n      console.log('show all did mount');\n\n    }\n\n    componentWillUnmount(){\n      console.log('unmounting show all');\n        AL.ControlObject.emitter.off('loaded',this.loadedCallback)\n        AL.ControlObject.emitter.off('deleted',this.deletedCallback)\n    }\n\n    populateList(){\n      //reset\n      console.log('populate button clicked');\n      AL.ControlObject.getAll();\n\n    }\n\n    sendToNewEditor(){\n      ReactRouter.hashHistory.push('/test/asd');\n    }\n\n    render(){\n      var sitesList;\n      console.log('state sites',this.state.sites);\n      if (this.state.sites && this.state.sites.length > 0){\n\n      sitesList = this.state.sites.map((site,index) =>{\n          return <div className='site-info-box' key={index}>\n               <SiteViewComponent key={site._id} info={site} del={this.deleteItem}/>\n             </div>\n        });\n      }\n\n\n      return(\n        <div className = 'sites-view'>\n          <div className = \"button load\" onClick={() => {this.populateList()}}> LOAD </div>\n          <div className = \"button load new\" onClick={() => {this.sendToNewEditor()}}> ADD </div>\n          <div className = \"info-boxes-container\">\n            <ol>\n              {sitesList}\n            </ol>\n          </div>\n\n        </div>\n      );\n\n    }\n\n  };\n\n  class SiteViewComponent extends React.Component{\n\n    constructor(){\n      super();\n\n    }\n    componentDidMount(){\n      console.log(this,'viewbox mounted');\n\n      this.setState(\n        {\n          info:this.props.info\n        }\n      )\n    }\n    componentWillUnmount(){\n      console.log(this,'viewbox unmount');\n    }\n\n    tagOneItem(tagSite){\n      console.log('sending to editor to tag ',tagSite);\n      ReactRouter.hashHistory.push('/test/asd/'+tagSite+'/tag');\n    }\n\n    render(){\n      var editLinkId;\n\n      if(this.state && this.state.info.id){\n        editLinkId = this.state.info.id;\n      }\n\n      return (<div className=\"site-inner-box\">\n        <div className=\"site-info\">\n          <ol>\n            <li>{this.props.info.id}</li>\n            <li>{this.props.info.title}</li>\n            <li>{this.props.info.year}</li>\n            <li>{this.props.info.arch}</li>\n            <li>{this.props.info.type}</li>\n            <li>{this.props.info.street}</li>\n            <li>{this.props.info.cityState}</li>\n            <li>{this.props.info.country}</li>\n            <li>{JSON.stringify(this.props.info.styles)}</li>\n          </ol>\n        </div>\n\n        <div className = \"site-controls\">\n          <div className = \"button\" onClick={() =>\n            {AL.ControlObject.deleteItem(this.state.info.id)}}>\n            delete\n          </div>\n           <ReactRouter.Link className=\"link\" to={\"/test/asd/\"+ editLinkId + \"/edit\" }><div className = \"button\">edit</div></ReactRouter.Link>\n          <div className = \"button\" onClick={() =>\n            {this.tagOneItem(this.state.info.id)}}>tag\n          </div>\n          <div className = \"button\" onClick={() =>\n            {AL.ControlObject.mapOneItem(this.state.info.id)}}>view\n          </div>\n          <div className=\"button btn-gc\" onClick={()=>{AL.ControlObject.siteGeocode(this.props.info)}}>GC</div>\n        </div>\n      </div>)\n\n    }\n\n\n  }\n\n  AL.SiteViewComponent = SiteViewComponent;\n  AL.ShowAllComponent = ShowAllComponent;\n})();\n","if (window.AL === undefined){window.AL = {}; }\n\n(function() {\n\n  class TestComponent extends React.Component{\n    constructor(){\n      super();\n    }\n    onComponentMount(){\n\n    }\n\n    render(){\n      var links = (<ol>\n       <li><ReactRouter.Link className=\"link\" to={\"/test/asd\" }>Add</ReactRouter.Link></li>\n       <li><ReactRouter.Link className=\"link\" to={'/test/all'}>Show Collection</ReactRouter.Link></li>\n      </ol>)\n      return (<div className='admin-test'>\n        <h3>This is the place where you can break everything</h3>\n        {links}\n      </div>)\n    }\n  }\n\n  AL.TestComponent = TestComponent;\n\n}());\n","if (window.AL === undefined) {window.AL = {};}\n\n(function() {\n\n    var mountNode = document.querySelector('#react-root');\n\n    var Router = ReactRouter.Router;\n    var Route = ReactRouter.Route;\n    var Link = Router.Link;\n\n    var router = <Router history={ReactRouter.hashHistory}>\n      <Route path=\"/\" component={AL.AppComponent}>\n        ReactRouter.IndexRoute component={AL.MapComponent} />\n        <Route path=\"/map\" component={AL.MapComponent} />\n        <Route path=\"/map/view-one/:sId\" component={AL.MapComponent}/>\n        <Route path=\"/test\" component={AL.TestComponent} />\n        <Route path=\"/test/asd\" component={AL.AddEditComponent} />\n        <Route path=\"/test/asd/:sId/edit\" component={AL.AddEditComponent} />\n        <Route path=\"/test/asd/:sId/tag\" component={AL.AddEditComponent}/>\n        <Route path=\"/test/all\" component={AL.ShowAllComponent} />\n      </Route>\n    </Router>;\n\nReactDOM.render(router, mountNode);\n\n\n}());\n"]}